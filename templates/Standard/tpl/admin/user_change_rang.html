<form action="ajax_checks.php?func=admin&site=change_rank&id={$id}" method="post" id="change_rang_form">
    <select name="newrang"><option value="0">{$smarty.const.VAR_RANK}</option>{$ranks}</select><br />
    <input type="submit" value="{$smarty.const.EDIT_2}" class="submit" name="submit" id="user_rank_submit" /> <img style="visibility: hidden" src="templates/{$smarty.const.DESIGN}/images/spinner.gif" id="user_rank_spinner" alt="" title="{$smarty.const.LOADING}" />
</form>
{literal}
<script type="text/javascript" language="javascript">	
$('change_rang_form').addEvent('submit', function(e) {
	new Event(e).stop();
	$('user_rank_spinner').style.visibility = '';
	$('user_rank_submit').disabled = true;
	new Request({
		url: $('change_rang_form').action,
		onSuccess: function(r) {
			$('user_rank_submit').disabled = false;
			$('user_rank_spinner').style.visibility = 'hidden';			
			if(r == 'ok') {															
				change_rang.hide();	
				make_info(RANK_SUCCESS_EDIT, 'accept');			
			} else {
				errorAlert(ERROR, r);
			}
		}
	}).send($('change_rang_form'));
});	
</script>
{/literal}